<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Üye Girişi - Denge Refleksoloji</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <main class="d-flex align-items-center justify-content-center" style="min-height:100vh;">
    <div class="card p-4" style="width:420px;">
      <h5 class="mb-3">Üye Girişi / Kayıt</h5>

      <div id="userArea">
        <form id="loginForm">
          <div class="mb-2">
            <label class="form-label">E-posta</label>
            <input type="email" class="form-control" id="loginEmail" required>
          </div>
          <div class="mb-2">
            <label class="form-label">Şifre</label>
            <input type="password" class="form-control" id="loginPass" required>
          </div>
          <div class="d-flex gap-2">
            <button class="btn btn-success w-100" type="submit">Giriş</button>
            <button type="button" class="btn btn-outline-secondary w-100" id="showRegister">Kayıt Ol</button>
          </div>
        </form>

        <form id="registerForm" style="display:none;">
          <div class="mb-2">
            <label class="form-label">Ad Soyad</label>
            <input class="form-control" id="regName" required>
          </div>
          <div class="mb-2">
            <label class="form-label">E-posta</label>
            <input type="email" class="form-control" id="regEmail" required>
          </div>
          <div class="mb-2">
            <label class="form-label">Şifre</label>
            <input type="password" class="form-control" id="regPass" required>
          </div>
          <div class="d-flex gap-2">
            <button class="btn btn-success w-100" id="doRegister" type="button">Kayıt Ol</button>
            <button class="btn btn-outline-secondary w-100" id="cancelRegister" type="button">İptal</button>
          </div>
        </form>
      </div>

      <div id="msg" class="mt-3"></div>
      <a class="d-block mt-3" href="index.html">Ana Sayfaya Dön</a>
    </div>
  </main>

<script>
  // Basit kullanıcı yönetimi demo with localStorage
  const showRegister = document.getElementById('showRegister');
  const registerForm = document.getElementById('registerForm');
  const loginForm = document.getElementById('loginForm');
  const cancelRegister = document.getElementById('cancelRegister');
  const msg = document.getElementById('msg');

  showRegister.addEventListener('click', ()=>{ loginForm.style.display='none'; registerForm.style.display='block'; msg.innerHTML=''; });
  cancelRegister.addEventListener('click', ()=>{ loginForm.style.display='block'; registerForm.style.display='none'; msg.innerHTML=''; });

  document.getElementById('doRegister').addEventListener('click', ()=>{
    const name = document.getElementById('regName').value.trim();
    const email = document.getElementById('regEmail').value.trim().toLowerCase();
    const pass = document.getElementById('regPass').value;
    if(!name||!email||!pass){ msg.innerHTML = '<div class="text-danger">Lütfen tüm alanları doldurun.</div>'; return; }
    const users = JSON.parse(localStorage.getItem('dr_users')||'{}');
    if(users[email]){ msg.innerHTML = '<div class="text-danger">Bu e-posta ile zaten kayıt var.</div>'; return; }
    users[email] = {name,email,pass};
    localStorage.setItem('dr_users', JSON.stringify(users));
    msg.innerHTML = '<div class="text-success">Kayıt başarılı. Giriş yapabilirsiniz.</div>';
    registerForm.reset();
    registerForm.style.display='none';
    loginForm.style.display='block';
  });

  loginForm.addEventListener('submit', (e)=>{
    e.preventDefault();
    const email = document.getElementById('loginEmail').value.trim().toLowerCase();
    const pass = document.getElementById('loginPass').value;
    const users = JSON.parse(localStorage.getItem('dr_users')||'{}');
    if(users[email] && users[email].pass === pass){
      msg.innerHTML = '<div class="text-success">Giriş başarılı. (Demo) — Profiline yönlendiriliyorsun.</div>';
      // demo: redirect to index or profile
      setTimeout(()=>{ window.location.href = 'index.html'; }, 900);
    } else {
      msg.innerHTML = '<div class="text-danger">E-posta veya şifre hatalı.</div>';
    }
  });
</script>
</body>
</html>
